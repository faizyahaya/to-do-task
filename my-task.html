<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Tasks | To-Do Task</title>
    <link rel="stylesheet" href="css/my-task.css">
  <link rel="stylesheet" href="css/dashboard.css" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <div class="dashboard-wrapper">

    <!-- Mobile menu icon -->
    <button class="menu-toggle" id="menuToggle">&#9776;</button>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <h2 class="logo">To-Do Task</h2>
      <nav>
        <ul>
          <li class="nav-link active"><a href="dashboard-provider.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>

          <li class="nav-link dropdown">
            <a href="#" class="dropdown-toggle"><i class="fas fa-tasks"></i> Posted Tasks <i class="fas fa-chevron-down"></i></a>
            <ul class="dropdown-menu">
              <li><a href="my-task.html">My Task</a></li>
              <li><a href="post-task.html">Post a Task</a></li>
            </ul>
          </li>

          <li class="nav-link"><a href="inbox.html"><i class="fas fa-comments"></i> Messages</a></li>

          <li class="nav-link dropdown">
            <a href="#" class="dropdown-toggle"><i class="fas fa-user"></i> Profile <i class="fas fa-chevron-down"></i></a>
            <ul class="dropdown-menu">
              <li><a href="edit-profile.html">Edit Profile</a></li>
              <li><a href="setting.html">Settings</a></li>
            </ul>
          </li>

          <li class="nav-link"><a href="notification.html"><i class="fas fa-bell"></i> Notifications</a></li>
          <li class="nav-link"><a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <section class="task-list">

      <div class="top-bar">
        <h1>My Tasks</h1>
        <span class="welcome-text"><i class="fas fa-user-circle"></i> Welcome Stella!</span>
      </div>

      <section class="dashboard-content">
        <div class="card task-table">
          <h2><i class="fas fa-clipboard-list"></i> Task History</h2>

          <div class="task-filters">
            <input type="text" id="taskSearch" placeholder="Search tasks by title..." />
            <select id="statusFilter">
              <option value="all">All Statuses</option>
              <option value="pending">Pending</option>
              <option value="completed">Completed</option>
              <option value="in-progress">In Progress</option>
            </select>
          </div>

          <table id="taskTable">
            <thead>
              <tr>
                <th>Task Title</th>
                <th>Category</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="taskTableBody">
              <!-- JS Injects Rows Here -->
            </tbody>
          </table>

          <div class="pagination">
            <button id="prevPage">Prev</button>
            <span id="pageNumbers"></span>
            <button id="nextPage">Next</button>
          </div>
        </div>
      </section>


    </main>
  </div>

  <script src="javascript/dashboard.js"></script>

  <script>
  const searchInput = document.getElementById("taskSearch");
  const statusFilter = document.getElementById("statusFilter");
  const taskTableBody = document.getElementById("taskTableBody");
  const prevPageBtn = document.getElementById("prevPage");
  const nextPageBtn = document.getElementById("nextPage");
  const pageNumbers = document.getElementById("pageNumbers");

  const allTasks = [
    { title: "Fix sink issue", category: "Repairs", date: "2025-07-10", status: "pending" },
    { title: "Repair generator", category: "Repairs", date: "2025-07-11", status: "completed" },
    { title: "Clean apartment", category: "Cleaning", date: "2025-07-12", status: "completed" },
    { title: "Babysit for client", category: "Childcare", date: "2025-07-13", status: "in-progress" },
    { title: "Install security camera", category: "Security", date: "2025-07-14", status: "pending" },
    { title: "Iron clothes", category: "Laundry", date: "2025-07-15", status: "completed" },
    { title: "Hair styling for event", category: "Beauty", date: "2025-07-16", status: "completed" },
    { title: "Fix car AC", category: "Automotive", date: "2025-07-17", status: "pending" },
    { title: "Plumbing for kitchen", category: "Plumbing", date: "2025-07-18", status: "in-progress" },
    { title: "Makeup appointment", category: "Beauty", date: "2025-07-19", status: "completed" },
  ];

  let filteredTasks = [...allTasks];
  let currentPage = 1;
  const tasksPerPage = 5;

  function renderTasks() {
    const start = (currentPage - 1) * tasksPerPage;
    const end = start + tasksPerPage;
    const tasksToShow = filteredTasks.slice(start, end);

    taskTableBody.innerHTML = '';

    tasksToShow.forEach(task => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${task.title}</td>
        <td>${task.category}</td>
        <td>${task.date}</td>
        <td><span class="status ${task.status}">${task.status.charAt(0).toUpperCase() + task.status.slice(1)}</span></td>
        <td>
          <a href="#" class="action-btn view"><i class="fas fa-eye"></i></a>
          <a href="#" class="action-btn edit"><i class="fas fa-edit"></i></a>
          <a href="#" class="action-btn delete"><i class="fas fa-trash"></i></a>
        </td>
      `;
      taskTableBody.appendChild(tr);
    });

    pageNumbers.textContent = `Page ${currentPage} of ${Math.ceil(filteredTasks.length / tasksPerPage)}`;
    prevPageBtn.disabled = currentPage === 1;
    nextPageBtn.disabled = currentPage === Math.ceil(filteredTasks.length / tasksPerPage);
  }

  function filterAndPaginateTasks() {
    const query = searchInput.value.toLowerCase();
    const status = statusFilter.value;

    filteredTasks = allTasks.filter(task => {
      const matchesTitle = task.title.toLowerCase().includes(query);
      const matchesStatus = status === "all" || task.status === status;
      return matchesTitle && matchesStatus;
    });

    currentPage = 1; // Reset to first page on new filter
    renderTasks();
  }

  prevPageBtn.addEventListener('click', () => {
    if (currentPage > 1) {
      currentPage--;
      renderTasks();
    }
  });

  nextPageBtn.addEventListener('click', () => {
    if (currentPage < Math.ceil(filteredTasks.length / tasksPerPage)) {
      currentPage++;
      renderTasks();
    }
  });

  searchInput.addEventListener("input", filterAndPaginateTasks);
  statusFilter.addEventListener("change", filterAndPaginateTasks);

  // Initialize on load
  filterAndPaginateTasks();
</script>



</body>
</html>
